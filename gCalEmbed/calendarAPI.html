<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Upcoming Events</title>

<style>
  body {
    font-family: system-ui, sans-serif;
    margin: 0;
    padding: 1rem;
  }
  .event {
    padding: 1rem 0;
    border-bottom: 1px solid #ddd;
  }
  .date {
    font-weight: bold;
  }
  .time {
    color: #555;
    font-size: 0.9rem;
  }
</style>
</head>
<body>

<h2>Upcoming Events</h2>
<div id="events">Loadingâ€¦</div>

<script>
  const API_KEY = "YAIzaSyDT6W_xPeP9XmuHgt36e2jNzFKuHvRk-0s";
  const CALENDAR_ID = "rsu71.org_hnsg2bqvh3ltdho31v4l0cumdo%40group.calendar.google.com"; // URL-encoded

  const url =
    `https://www.googleapis.com/calendar/v3/calendars/${CALENDAR_ID}/events` +
    `?key=${API_KEY}` +
    `&singleEvents=true` +
    `&orderBy=startTime` +
    `&timeMin=${new Date().toISOString()}`;

  fetch(url)
    .then(res => res.json())
    .then(data => {
      const container = document.getElementById("events");
      container.innerHTML = "";

      data.items.forEach(event => {
        const start = event.start.dateTime || event.start.date;
        const d = new Date(start);

        container.innerHTML += `
          <div class="event">
            <div class="date">${d.toLocaleDateString()}</div>
            <div class="time">${d.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})}</div>
            <div>${event.summary || "(No title)"}</div>
          </div>`;
      });
    })
    .catch(() => {
      document.getElementById("events").innerText = "Failed to load events";
    });
</script>

</body>
</html>
